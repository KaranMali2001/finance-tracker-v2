#!/usr/bin/env sh

echo "ğŸ”§ Running pre-commit formatting..."

# Format Go backend code
echo "ğŸ“ Formatting Go files..."

cd ../backend

if command -v gofmt >/dev/null 2>&1; then
  gofmt -w .
  echo "âœ“ Go files formatted with gofmt"
else
  echo "âš ï¸  gofmt not found, skipping Go formatting"
fi

if command -v goimports >/dev/null 2>&1; then
  goimports -w .
  echo "âœ“ Go imports organized with goimports"
else
  echo "âš ï¸  goimports not found, install with: go install golang.org/x/tools/cmd/goimports@latest"
fi

# Format Next.js/TypeScript files using lint-staged
cd ../finance-tracker-web

echo "ğŸ“ Formatting Next.js/TypeScript files..."

npx lint-staged

echo "âœ… Pre-commit formatting complete!"

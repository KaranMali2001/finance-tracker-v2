<!-- finance-tracker-web/src/app/components/error-display/error-display.component.html -->
<mat-card class="m-8">
  <mat-card-content>
    <div class="flex flex-col items-center gap-4 text-center p-4">
      <!-- Error Icon -->
      <mat-icon
        [class]="error().isServerError ? 'text-red-500' : 'text-blue-500'"
        class="text-5xl w-12 h-12"
      >
        {{ getErrorIcon() }}
      </mat-icon>

      <!-- Error Title -->
      <h3 class="text-xl font-semibold m-0">
        {{ getErrorTitle() }}
      </h3>

      <!-- Error Message -->
      <p class="text-gray-700 text-base m-0">
        {{ error().message }}
      </p>

      <!-- Field-level errors -->
      @if (error().fieldErrors.length > 0) {
        <mat-list class="w-full text-left mt-4">
          @for (fieldError of error().fieldErrors; track fieldError.field) {
            <mat-list-item class="flex items-center gap-2">
              <span class="font-medium">{{ fieldError.field }}:</span>
              <span class="text-red-600">{{ fieldError.error }}</span>
            </mat-list-item>
          }
        </mat-list>
      }

      <!-- Action (e.g., redirect) -->
      @if (error().action; as action) {
        <div class="bg-blue-50 border border-blue-200 rounded p-4 w-full">
          <p class="text-blue-800 m-0">{{ action.message }}</p>
        </div>
      }

      <!-- Error details (for debugging) -->
      @if (showDetails()) {
        <details class="w-full text-left mt-4">
          <summary class="cursor-pointer text-sm text-gray-600 mb-2">Technical Details</summary>
          <pre class="bg-gray-100 p-4 rounded overflow-x-auto text-sm"
            >{{ getErrorDetails() }}
          </pre>
        </details>
      }

      <!-- Retry Button -->
      @if (showRetry()) {
        <button mat-raised-button color="primary" (click)="onRetry.emit()" class="mt-2">
          <mat-icon>refresh</mat-icon>
          <span class="ml-2">Try Again</span>
        </button>
      }
    </div>
  </mat-card-content>
</mat-card>

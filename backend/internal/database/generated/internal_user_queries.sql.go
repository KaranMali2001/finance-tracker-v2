// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: internal_user_queries.sql

package generated

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const updateUserInternal = `-- name: UpdateUserInternal :one
UPDATE users SET 
 transaction_image_parse_attempts=COALESCE($1,transaction_image_parse_attempts),
 transaction_image_parse_successes=COALESCE($2,transaction_image_parse_successes)
WHERE clerk_id=$3
RETURNING clerk_id, email, database_url, lifetime_income, lifetime_expense, use_llm_parsing, llm_parse_credits, is_active, created_at, updated_at, transaction_image_parse_attempts, transaction_image_parse_successes
`

type UpdateUserInternalParams struct {
	TransactionImageParseAttempts  pgtype.Int4
	TransactionImageParseSuccesses pgtype.Int4
	ClerkID                        string
}

func (q *Queries) UpdateUserInternal(ctx context.Context, arg UpdateUserInternalParams) (User, error) {
	row := q.db.QueryRow(ctx, updateUserInternal, arg.TransactionImageParseAttempts, arg.TransactionImageParseSuccesses, arg.ClerkID)
	var i User
	err := row.Scan(
		&i.ClerkID,
		&i.Email,
		&i.DatabaseUrl,
		&i.LifetimeIncome,
		&i.LifetimeExpense,
		&i.UseLlmParsing,
		&i.LlmParseCredits,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.TransactionImageParseAttempts,
		&i.TransactionImageParseSuccesses,
	)
	return i, err
}

// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: reconciliation.sql

package generated

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createBankStatementUpload = `-- name: CreateBankStatementUpload :one
INSERT INTO bank_statement_uploads (
    user_id,
    account_id,
    file_name,
    file_type,
    file_size,
    statement_period_start,
    statement_period_end,
    upload_status
) VALUES (
    $1, $2, $3, $4, $5, $6, $7, $8
)
RETURNING id
`

type CreateBankStatementUploadParams struct {
	UserID               string
	AccountID            pgtype.UUID
	FileName             string
	FileType             pgtype.Text
	FileSize             pgtype.Int4
	StatementPeriodStart pgtype.Date
	StatementPeriodEnd   pgtype.Date
	UploadStatus         pgtype.Text
}

func (q *Queries) CreateBankStatementUpload(ctx context.Context, arg CreateBankStatementUploadParams) (pgtype.UUID, error) {
	row := q.db.QueryRow(ctx, createBankStatementUpload,
		arg.UserID,
		arg.AccountID,
		arg.FileName,
		arg.FileType,
		arg.FileSize,
		arg.StatementPeriodStart,
		arg.StatementPeriodEnd,
		arg.UploadStatus,
	)
	var id pgtype.UUID
	err := row.Scan(&id)
	return id, err
}

const insertStatementTransaction = `-- name: InsertStatementTransaction :one
INSERT INTO statement_transactions (
    upload_id,
    account_id,
    transaction_date,
    description,
    amount,
    type,
    balance,
    reference_number,
    raw_row_hash,
    row_number,
    is_duplicate
) VALUES (
    $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11
)
ON CONFLICT (upload_id, raw_row_hash) DO NOTHING
RETURNING raw_row_hash
`

type InsertStatementTransactionParams struct {
	UploadID        pgtype.UUID
	AccountID       pgtype.UUID
	TransactionDate pgtype.Date
	Description     pgtype.Text
	Amount          pgtype.Numeric
	Type            string
	Balance         pgtype.Numeric
	ReferenceNumber pgtype.Text
	RawRowHash      string
	RowNumber       int32
	IsDuplicate     pgtype.Bool
}

func (q *Queries) InsertStatementTransaction(ctx context.Context, arg InsertStatementTransactionParams) (string, error) {
	row := q.db.QueryRow(ctx, insertStatementTransaction,
		arg.UploadID,
		arg.AccountID,
		arg.TransactionDate,
		arg.Description,
		arg.Amount,
		arg.Type,
		arg.Balance,
		arg.ReferenceNumber,
		arg.RawRowHash,
		arg.RowNumber,
		arg.IsDuplicate,
	)
	var raw_row_hash string
	err := row.Scan(&raw_row_hash)
	return raw_row_hash, err
}
